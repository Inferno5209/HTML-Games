<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crystal Acres Resorts</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
    </style>
</head>
<body>
    <!-- Device Selection Screen -->
    <div id="deviceSelectionScreen" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); z-index: 999999; display: flex; align-items: center; justify-content: center; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">
        <div style="text-align: center; max-width: 600px; padding: 40px; width: 100%;">
            <h1 style="color: white; font-size: 48px; margin-bottom: 20px; text-shadow: 0 4px 20px rgba(0,0,0,0.2);">Welcome to Crystal Acres</h1>
            <p style="color: rgba(255,255,255,0.9); font-size: 20px; margin-bottom: 50px; text-shadow: 0 2px 10px rgba(0,0,0,0.1);">Please select your device type for the best experience</p>
            
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; max-width: 500px; margin: 0 auto;">
                <!-- Desktop -->
                <div onclick="selectDevice('desktop')" style="background: white; border-radius: 20px; padding: 30px 20px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 40px rgba(0,0,0,0.2);" onmouseover="this.style.transform='translateY(-10px) scale(1.05)'; this.style.boxShadow='0 20px 60px rgba(0,0,0,0.3)';" onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 10px 40px rgba(0,0,0,0.2)';">
                    <div style="font-size: 64px; margin-bottom: 15px;">üñ•Ô∏è</div>
                    <div style="font-size: 18px; font-weight: 700; color: #333; margin-bottom: 8px;">Desktop</div>
                    <div style="font-size: 12px; color: #666;">Large screen experience</div>
                </div>
                
                <!-- Laptop -->
                <div onclick="selectDevice('laptop')" style="background: white; border-radius: 20px; padding: 30px 20px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 40px rgba(0,0,0,0.2);" onmouseover="this.style.transform='translateY(-10px) scale(1.05)'; this.style.boxShadow='0 20px 60px rgba(0,0,0,0.3)';" onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 10px 40px rgba(0,0,0,0.2)';">
                    <div style="font-size: 64px; margin-bottom: 15px;">üíª</div>
                    <div style="font-size: 18px; font-weight: 700; color: #333; margin-bottom: 8px;">Laptop</div>
                    <div style="font-size: 12px; color: #666;">Portable computer</div>
                </div>
                
                <!-- Tablet -->
                <div onclick="selectDevice('tablet')" style="background: white; border-radius: 20px; padding: 30px 20px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 40px rgba(0,0,0,0.2);" onmouseover="this.style.transform='translateY(-10px) scale(1.05)'; this.style.boxShadow='0 20px 60px rgba(0,0,0,0.3)';" onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 10px 40px rgba(0,0,0,0.2)';">
                    <div style="font-size: 64px; margin-bottom: 15px;">üì±</div>
                    <div style="font-size: 18px; font-weight: 700; color: #333; margin-bottom: 8px;">Tablet</div>
                    <div style="font-size: 12px; color: #666;">iPad or similar</div>
                </div>
                
                <!-- Phone -->
                <div onclick="selectDevice('phone')" style="background: white; border-radius: 20px; padding: 30px 20px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 40px rgba(0,0,0,0.2);" onmouseover="this.style.transform='translateY(-10px) scale(1.05)'; this.style.boxShadow='0 20px 60px rgba(0,0,0,0.3)';" onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 10px 40px rgba(0,0,0,0.2)';">
                    <div style="font-size: 64px; margin-bottom: 15px;">üì±</div>
                    <div style="font-size: 18px; font-weight: 700; color: #333; margin-bottom: 8px;">Phone</div>
                    <div style="font-size: 12px; color: #666;">Mobile device</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Website Content (initially hidden) -->
    <div id="mainWebsite" style="display: none;">
    <!-- Vertical Sidebar Navigation -->
    <nav class="sidebar-nav">
        <div class="sidebar-logo" style="position: relative;">
            <img src="icon.png" alt="Crystal Acres Logo" style="cursor: pointer;">
            <!-- Decoy clickable area (does nothing) -->
            <div onclick="void(0)" style="position: absolute; left: 0; top: 0; width: 100%; height: 100%; cursor: pointer; z-index: 1001;"></div>
            <!-- Hidden Admin Button Over Middle Tree (actual sweet spot) -->
            <button id="hiddenAdminBtn" onclick="toggleAdminMode()" style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 30px; height: 30px; background: transparent; border: none; cursor: pointer; z-index: 1002; opacity: 0;">
            </button>
        </div>
        <ul class="nav-menu" id="sidebarNavMenu">
            <li><a href="#home" class="nav-link">Home</a></li>
            <li><a href="#general-info" class="nav-link">General Information</a></li>
            <li><a href="#things-to-do" class="nav-link">Things to Do</a></li>
            <li><a href="#history" class="nav-link">History</a></li>
            <li><a href="#cottages" class="nav-link">The Cottages</a></li>
            <li><a href="#contact" class="nav-link">Contact</a></li>
        </ul>
    </nav>

    <!-- Top Navigation Bar -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <!-- Edit Mode Buttons -->
            <!-- Edit Page Button -->
            <button onclick="toggleEditMode()" id="editPageBtn" style="display: none; position: absolute; left: 85px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-size: 15px; font-weight: 600; box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4); transition: all 0.3s ease; z-index: 1001;">
                <span style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 18px;">üìù</span>
                    <span>Edit Page</span>
                </span>
            </button>
            
            <!-- Save Button -->
            <button onclick="savePageContent()" id="savePageBtn" style="display: none; position: absolute; left: 20px; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); color: white; border: none; padding: 11px 22px; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 700; box-shadow: 0 4px 20px rgba(56, 239, 125, 0.5); transition: all 0.3s ease; z-index: 1001;">
                <span style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 18px;">üíæ</span>
                    <span>Save</span>
                </span>
            </button>
            
            <!-- Cancel Button -->
            <button onclick="cancelPageEdit()" id="cancelPageBtn" style="display: none; position: absolute; left: 150px; background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%); color: white; border: none; padding: 11px 22px; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: 700; box-shadow: 0 4px 20px rgba(238, 9, 121, 0.5); transition: all 0.3s ease; z-index: 1001;">
                <span style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 18px;">‚úñ</span>
                    <span>Cancel</span>
                </span>
            </button>
            
            <!-- Pine Trees Decoration -->
            <div style="position: absolute; left: 48%; transform: translateX(-50%); font-size: 1.5rem; opacity: 0.7; white-space: nowrap; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3)); pointer-events: none; letter-spacing: 8px;">
                üå≤  üå≤  üå≤  üå≤  üå≤  üå≤  üå≤  üå≤  üå≤  üå≤  üå≤  üå≤  üå≤  üå≤  üå≤  üå≤
            </div>
            
            <!-- Admin Controls -->
            <div style="position: absolute; right: 20px; display: flex; gap: 10px; align-items: center; z-index: 1001;">
                <!-- Admin Toggle Button -->
                <button id="adminToggleBtn" onclick="toggleAdminMode()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-size: 15px; font-weight: 600; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); transition: all 0.3s ease; position: relative; overflow: hidden;">
                    <span style="position: relative; z-index: 1; display: flex; align-items: center; gap: 8px;">
                        <span style="font-size: 18px;">üîí</span>
                        <span>Admin</span>
                    </span>
                </button>
                
                <!-- Admin Tools Dropdown -->
                <div style="position: relative;">
                    <button id="adminToolsBtn" onclick="toggleAdminDropdown()" style="display: none; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-size: 15px; font-weight: 600; box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4); transition: all 0.3s ease; position: relative; overflow: hidden;">
                        <span style="position: relative; z-index: 1; display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 18px;">‚öôÔ∏è</span>
                            <span>Admin Tools</span>
                        </span>
                    </button>
                    <div id="adminDropdown" style="display: none; position: absolute; top: 100%; right: 0; margin-top: 8px; background: white; border: none; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); min-width: 260px; z-index: 10000; overflow: hidden; backdrop-filter: blur(10px);">
                        <button onclick="openAdminManager(); toggleAdminDropdown();" style="width: 100%; background: white; color: #333; border: none; padding: 16px 20px; text-align: left; cursor: pointer; font-size: 15px; font-weight: 600; border-bottom: 1px solid #f0f0f0; transition: all 0.3s ease; display: flex; align-items: center; gap: 12px;" onmouseover="this.style.background='linear-gradient(135deg, #667eea 0%, #764ba2 100%)'; this.style.color='white'; this.style.transform='translateX(5px)';" onmouseout="this.style.background='white'; this.style.color='#333'; this.style.transform='translateX(0)';">
                            <span style="font-size: 20px; display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; transition: all 0.3s ease;">üë§</span>
                            <span>Admin Manager</span>
                        </button>
                        <button onclick="toggleMaintenanceMode(); toggleAdminDropdown();" id="maintenanceModeBtn" style="width: 100%; background: white; color: #333; border: none; padding: 16px 20px; text-align: left; cursor: pointer; font-size: 15px; font-weight: 600; border-radius: 0 0 12px 12px; transition: all 0.3s ease; display: flex; align-items: center; gap: 12px;" onmouseover="this.style.background='linear-gradient(135deg, #f093fb 0%, #f5576c 100%)'; this.style.color='white'; this.style.transform='translateX(5px)';" onmouseout="this.style.background='white'; this.style.color='#333'; this.style.transform='translateX(0)';">
                            <span style="font-size: 20px; display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 8px; transition: all 0.3s ease;">üöß</span>
                            <div style="display: flex; flex-direction: column; gap: 2px;">
                                <span>Maintenance Mode</span>
                                <span style="font-size: 12px; font-weight: 500; opacity: 0.8;"><span id="maintenanceStatus">OFF</span></span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Maintenance Mode Overlay -->
    <div id="maintenanceOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); z-index: 999;">
        <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px;">
            <div style="text-align: center; color: white; max-width: 600px;">
                <div style="font-size: 100px; margin-bottom: 30px; animation: bounce 2s infinite;">&#128679;</div>
                <h1 style="font-size: 48px; margin-bottom: 20px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">Website Under Maintenance</h1>
                <p style="font-size: 24px; margin-bottom: 30px; line-height: 1.6;">We're currently performing scheduled maintenance to improve your experience.</p>
                <p style="font-size: 18px; opacity: 0.9;">Please check back shortly. We apologize for any inconvenience.</p>
                <div style="margin-top: 50px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 10px; backdrop-filter: blur(10px);">
                    <p style="font-size: 16px; margin: 0;">For urgent inquiries, please contact us at:</p>
                    <p style="font-size: 20px; font-weight: bold; margin: 10px 0 0 0;">crystalacresnh@gmail.com</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-image">
            <img src="main.jpg" alt="Crystal Acres">
            <div class="hero-overlay">
                <h1>Welcome to Crystal Acres</h1>
                <p>Your Lakeside Retreat Since 1898</p>
            </div>
        </div>
    </section>

    <!-- Opening Text Section -->
    <section class="opening-section">
        <div class="container">
            <div class="opening-content">
                <p>Welcome to Crystal Acres, a family-owned gem nestled in the heart of Gilmanton Iron Works, New Hampshire. Our cottages offer a nostalgic escape, reminiscent of the family cabin you visited as a child. With three charming, and unique cottages for rent, each one is a peaceful retreat where you can unwind and create lasting memories.</p>

                <p>It is just a short walk from the cottages down the hill to the lake and beach. The ample lakefront is shared with the renters in our other two cottages. Our property boasts 200 feet of pristine sandy beach, with a delightful mix of sun and shade, perfect for lounging or enjoying a swim in the crystal-clear lake. The view of the Belknap Mountain Range adds a breathtaking backdrop for your getaway. Whether you're looking for adventure or relaxation, we offer an abundance of activities to suit all ages. The lake temperature typically hovers in the 70s and 80s, making it ideal for swimming and water fun. Take advantage of our three piers, raft, and a selection of boats, including canoes, kayaks, rowboats, and a paddleboat‚Äîall available for your enjoyment. If you own any boats you would like to bring up, including motor boats, you are welcome to bring them along. There is a town boat launch conveniently just down the road and our piers are equipped for docking boats. After the sun goes down, enjoy stargazing and listening to the loons call while enjoying a fire on the beach in one of our two portable firepits.</p>

                <p>The property is located on the southern shore of Crystal lake facing north, which offers the rare treat of watching both the sunrise and sunset over the sparkling waters of Crystal Lake. Each cottage is thoughtfully spaced apart, providing privacy and its own dedicated parking, while a shared wood shed ensures guests have easy access to firewood for cozy evenings by the fireplace. The property also features a shuffleboard court and plenty of open space for yard games, making it easy to gather for friendly competition or play. With no roads to cross between the cottages and the shoreline, Crystal Acres is especially safe for children, allowing families to enjoy the lake and grounds with peace of mind.</p>

                <p>We have the perfect setting for family reunions. Our three cottages allow for personal space, while the grounds and lake inspire group activities and family bonding. If you need a little more room, we have a Bunk House that sleeps four. It is a favorite among teens and older kids. With the owners living on the property, there's always someone available to assist you during your stay. You'll enjoy the comfort of knowing we're here to ensure you have everything you need.</p>

                <p>We welcome pets at our property so you can enjoy your stay with your furry companions, but an additional fee applies. For the comfort and safety of all guests, dogs must be kept on leashes while on the grounds and owners are expected to clean up after their pets. Please note that any damage caused by pets is the financial responsibility of the owner, and we kindly ask that pets be well-behaved and respectful of the cottages and surrounding property.</p>

                <p>Crystal Lake is a 455-acre lake known for it's clean water quality. The lake offers scenic views of Belknap Mountain and Mount Major. It is a year-round recreation hub, with summer activities like boating, kayaking, sailing, swimming, and community events such as boat parades and fireworks, while winter brings ice fishing. Anglers enjoy catching rainbow trout, bass, pickerel, and perch, and the lake is also an important breeding ground for loons, bald eagles, herons, and other wildlife, with occasional visits from moose, otters, and beavers.</p>

                <p>Situated conveniently close to the popular destinations of Lake Winnipesaukee, Laconia, Alton, and Tilton, Crystal Acres is the perfect place to escape, reconnect with loved ones, and enjoy the best of New Hampshire's natural beauty. Come experience a timeless retreat at Crystal Acres.</p>
            </div>
        </div>
    </section>

    <!-- Video Section -->
    <section class="video-section">
        <div class="container">
            <h2>Experience Crystal Acres</h2>
            <div id="videoSlideContainer" style="position: relative; width: 100%; max-width: 900px; margin: 0 auto; aspect-ratio: 16/9; overflow: hidden; border-radius: 10px; background: #000; box-shadow: 0 5px 30px rgba(0,0,0,0.3);">
                <iframe id="videoSlideFrame" src="https://docs.google.com/presentation/d/e/2PACX-1vTRZ4jjf5Kd2ZTr5VDohoYdxccf89dnsMCTMcIeUx6rblCpRujMy8XU4C5mwXq2K0UIOmWA8uTk4xb3/embed?start=true&loop=true&delayms=3000&rm=minimal" style="width: 100%; height: 100%; border: none; display: block;"></iframe>
            </div>
        </div>
    </section>

    <!-- Photo Gallery Section -->
    <section class="gallery-section">
        <div class="container">
            <h2>Explore Our Property</h2>
            <!-- Advanced Google Slide Embed -->
            <div id="slideContainer" style="position: relative; width: 100%; max-width: 900px; margin: 0 auto; aspect-ratio: 16/9; overflow: hidden; border-radius: 10px; background: #000; box-shadow: 0 5px 30px rgba(0,0,0,0.3);">
                <iframe id="slideFrame" src="https://docs.google.com/presentation/d/e/2PACX-1vRLNRHTt_E_bX2w3dPebcHnUnLZRauMfyZDj_fIlMOlvB9WmNlfIwLTh8QvT-NZxBd7xG-OHS-G66JR/pubembed?slide=0&rm=minimal" style="width: 100%; height: 100%; border: none; pointer-events: none; display: block;"></iframe>
                <button style="position: absolute; top: 50%; left: 20px; transform: translateY(-50%); background: #ffffff; color: #000000; opacity: 0.8; font-size: 24px; padding: 14.4px 19.2px; cursor: pointer; border-radius: 8px; user-select: none; border: none; font-weight: bold; transition: all 0.2s;" onclick="prevSlide()" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.8'">‚óÄ</button>
                <button style="position: absolute; top: 50%; right: 20px; transform: translateY(-50%); background: #ffffff; color: #000000; opacity: 0.8; font-size: 24px; padding: 14.4px 19.2px; cursor: pointer; border-radius: 8px; user-select: none; border: none; font-weight: bold; transition: all 0.2s;" onclick="nextSlide()" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.8'">‚ñ∂</button>
            </div>

            <script>
            let currentSlide = 0;
            let baseSrc = "https://docs.google.com/presentation/d/e/2PACX-1vRLNRHTt_E_bX2w3dPebcHnUnLZRauMfyZDj_fIlMOlvB9WmNlfIwLTh8QvT-NZxBd7xG-OHS-G66JR/pubembed";

            function updateFrame() {
                let src = baseSrc + "?slide=" + currentSlide + "&rm=minimal";
                document.getElementById("slideFrame").src = src;
            }

            function nextSlide() {
                currentSlide++;
                updateFrame();
            }

            function prevSlide() {
                if (currentSlide > 0) {
                    currentSlide--;
                    updateFrame();
                }
            }
            </script>
        </div>
    </section>

    <!-- Map Section -->
    <section class="map-section">
        <div class="container">
            <h2>Find Us</h2>
            <div class="map-container">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2905.8686684679!2d-71.33891832345476!3d43.29896077113673!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89e272b4c8c0c0c1%3A0x1a2b3c4d5e6f7g8h!2s278%20Crystal%20Lake%20Rd%2C%20Gilmanton%20Iron%20Works%2C%20NH%2003837!5e0!3m2!1sen!2sus!4v1234567890123!5m2!1sen!2sus" 
                    width="100%" 
                    height="450" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
            <div class="address">
                <p><strong>278 Crystal Lake Rd, Gilmanton Iron Works, NH 03837</strong></p>
            </div>
        </div>
    </section>

    <!-- General Information Section -->
    <section id="general-info" class="info-section">
        <div class="container">
            <h2>General Information</h2>
            
            <div class="info-content">
                <h3>Location</h3>
                <p>Gilmanton Iron Works is conveniently located in New Hampshire's Lakes Region, offering easy access to both the mountains and the seacoast. The village is about 2 hours from Boston, 1 hour 20 minutes from North Conway, 30 minutes from Concord, and a little over 1 hour from Portsmouth. Closer by, the town of Alton is only about 15 minutes away, while Laconia is around 25 minutes. In Alton, visitors will find a Hannaford supermarket along with several dining options, including Shibley's at the Pier overlooking Lake Winnipesaukee, the cozy J.P. China offering Asian cuisine, and Dockside Caf√© for casual lakeside meals. In Laconia, there are larger shopping options, including a Walmart Supercenter, Market Basket, and Hannaford. For spirits and fine wines, the nearest New Hampshire State Liquor & Wine Outlet is in Gilford, about 30 minutes from Gilmanton Iron Works. Together, these nearby towns ensure that anyone staying in the area has quick access to groceries, restaurants, everyday essentials, and specialty shopping all within a short drive.</p>

                <h3>Fishing</h3>
                <p>In New Hampshire, anyone 16 years or older is required to have a valid fishing license to fish in the state's lakes, rivers, and streams, including Crystal Lake. Licenses help support fisheries management, conservation programs, and access to public waters. The process is simple: you can purchase a license online through the <a href="https://www.wildlife.nh.gov/licenses-and-permits" target="_blank" rel="noopener noreferrer">New Hampshire Fish & Game Department website</a>, or in person at many town halls, sporting goods stores, or Fish & Game offices. Options include short-term, annual, and combination hunting/fishing licenses, with discounted rates available for New Hampshire residents. Always be sure to carry your license while fishing, as conservation officers may ask to see it.</p>

                <h3>Boating</h3>
                <p>If you plan on bringing a motor boat, please be aware of the laws. The Marine Patrol does come on the lake periodically. In New Hampshire, anyone (must be 16 years or older) operating a motorized boat with more than 25 horsepower (including jet skis) must have a Safe Boating Certificate. Both residents and visitors are required to meet this rule unless they hold a NASBLA-approved boating certificate from another state or a valid U.S. Coast Guard license. To get certified, boaters must complete a state-approved safety course‚Äîeither online or in person‚Äîpass an exam, and then carry the certificate while operating a vessel. This ensures safe and responsible boating on New Hampshire's waterways. More information on requirements and approved courses can be found on the New Hampshire Marine Patrol website.</p>
            </div>
        </div>
    </section>

    <!-- Things to Do Section -->
    <section id="things-to-do" class="info-section alt-bg">
        <div class="container">
            <h2>Things to Do in the Area</h2>
            
            <div class="info-content">
                <p>Nestled between the mountains and lakes, New Hampshire's Lakes Region and nearby White Mountains provide visitors with endless opportunities for outdoor adventure, family fun, and local charm. From hiking trails that climb to breathtaking vistas, to vibrant shopping villages, arcades, and nature centers, the region offers something for every interest and age group. Just a short drive from Gilmanton Iron Works, guests can spend the morning exploring mountain summits, the afternoon browsing unique shops or enjoying lakeside amusements, and the evening relaxing by the water. Whether you're seeking scenic beauty, exciting attractions, or memorable day trips, this area is a true four-season destination that highlights the best of New England.</p>

                <h3>Hiking</h3>
                <p>Hiking in New Hampshire's Lakes Region offers a perfect mix of sparkling lake views, rolling hills, and mountain summits, making it a favorite destination for outdoor enthusiasts. Trails range from easy family-friendly walks to more challenging climbs, many with sweeping views of Lake Winnipesaukee, the Belknaps, and beyond. Near Gilmanton, hikers can enjoy a variety of options: Mount Major in Alton (3.2-mile loop) is one of the most popular hikes in the state, rewarding with panoramic views of Lake Winnipesaukee; Belknap Mountain in Gilford (3.5 miles round trip) features a fire tower at the summit with 360-degree vistas; Gunstock Mountain (5 miles via the Ridge Trail) offers moderate climbing with scenic overlooks of the lake and Ossipee range; Lockes Hill in Gilford (1.8-mile loop) is an easier trail with interpretive signs and beautiful views of Winnipesaukee; and Straightback Mountain in Alton (about 5 miles round trip) provides a quieter alternative to Mount Major with equally impressive summit views. Together, these hikes showcase the natural beauty and variety of the Lakes Region, making it a hiker's paradise just minutes from Gilmanton.</p>

                <h3>Shopping & Amusements</h3>
                <p>The Lakes Region of New Hampshire offers plenty of shopping and amusements, blending local charm with family fun. In Meredith, the Mill Falls Marketplace features a collection of boutique shops, galleries, and caf√©s housed in restored 19th-century mill buildings along the lake. Nearby in Tilton, the Tanger Outlets provide a wide variety of brand-name stores for bargain hunters. For a mix of fun and nostalgia, Funspot in Laconia‚Äîthe world's largest arcade‚Äîoffers classic pinball, video games, and bowling. In Weirs Beach, visitors can explore souvenir shops and enjoy arcades, restaurants, and boardwalk attractions along the shore of Lake Winnipesaukee. For a more nature-focused experience, the Squam Lakes Natural Science Center in Holderness combines live animal exhibits, walking trails, and interactive learning to showcase New Hampshire's wildlife and natural environment. Together, these destinations make the Lakes Region a lively spot for both shopping and entertainment.</p>

                <h3>White Mountains</h3>
                <p>The White Mountains offer endless opportunities for adventure and sightseeing, and several of the region's highlights are just a short drive from Gilmanton Iron Works. A favorite destination is Mount Washington‚Äîthe tallest peak in the Northeast‚Äîwhere visitors can drive the Auto Road, ride the Cog Railway, or hike to the summit; it's about 1 hour 45 minutes away. For family fun, Story Land in Glen provides rides and attractions inspired by fairy tales, perfect for kids, and is roughly 1 hour 30 minutes away. Nature lovers can explore Franconia Notch State Park, home to the Flume Gorge, Echo Lake, and the Cannon Mountain Aerial Tramway, located about 1 hour 40 minutes away. Another must-see is Crawford Notch State Park, offering scenic waterfalls and hiking trails just 1 hour 45 minutes away. Finally, the charming town of North Conway, about 1 hour 20 minutes away, is known for its outlet shopping, restaurants, and easy access to hiking and skiing. Together, these destinations make the White Mountains a perfect day trip from Gilmanton Iron Works.</p>
            </div>

            <div class="things-gallery">
                <!-- Advanced Google Slide Embed -->
                <div id="thingsSlideContainer" style="position: relative; width: 100%; max-width: 900px; margin: 0 auto; aspect-ratio: 16/9; overflow: hidden; border-radius: 10px; background: #000; box-shadow: 0 5px 30px rgba(0,0,0,0.3);">
                    <iframe id="thingsSlideFrame" src="https://docs.google.com/presentation/d/e/2PACX-1vTopyD_amx53tOIwmXHvj2M8LrQtFSshdbId5tVMig18_JlC0TkEtpa9ROMsh6-CNwVVcDTEd16dPHa/pubembed?slide=0&rm=minimal" style="width: 100%; height: 100%; border: none; pointer-events: none; display: block;"></iframe>
                    <button style="position: absolute; top: 50%; left: 20px; transform: translateY(-50%); background: #ffffff; color: #000000; opacity: 0.8; font-size: 24px; padding: 14.4px 19.2px; cursor: pointer; border-radius: 8px; user-select: none; border: none; font-weight: bold; transition: all 0.2s;" onclick="prevThingsSlide()" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.8'">‚óÄ</button>
                    <button style="position: absolute; top: 50%; right: 20px; transform: translateY(-50%); background: #ffffff; color: #000000; opacity: 0.8; font-size: 24px; padding: 14.4px 19.2px; cursor: pointer; border-radius: 8px; user-select: none; border: none; font-weight: bold; transition: all 0.2s;" onclick="nextThingsSlide()" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.8'">‚ñ∂</button>
                </div>

                <script>
                let currentThingsSlide = 0;
                let thingsBaseSrc = "https://docs.google.com/presentation/d/e/2PACX-1vTopyD_amx53tOIwmXHvj2M8LrQtFSshdbId5tVMig18_JlC0TkEtpa9ROMsh6-CNwVVcDTEd16dPHa/pubembed";

                function updateThingsFrame() {
                    let src = thingsBaseSrc + "?slide=" + currentThingsSlide + "&rm=minimal";
                    document.getElementById("thingsSlideFrame").src = src;
                }

                function nextThingsSlide() {
                    currentThingsSlide++;
                    updateThingsFrame();
                }

                function prevThingsSlide() {
                    if (currentThingsSlide > 0) {
                        currentThingsSlide--;
                        updateThingsFrame();
                    }
                }
                </script>
            </div>
        </div>
    </section>

    <!-- History Section -->
    <section id="history" class="info-section">
        <div class="container">
            <h2>Our History</h2>
            
            <div class="info-content">
                <p>Crystal Acres has been at the heart of our family since 1898, making it a treasured piece of New Hampshire's Lakes Region heritage. For over a century, this beautiful lakeside property has been passed down through generations, preserving its natural beauty and welcoming spirit. We have been sharing this very special place with the public since the 1940's, allowing countless families to create their own cherished memories on the shores of Crystal Lake.</p>

                <h3>The Bunkhouse - A Living Time Capsule</h3>
                <p>Built in 1936, The Bunkhouse is a remarkable piece of Crystal Acres history that has been preserved with its original camp cabin charm. Step inside and you'll discover wood-paneled walls that still bear historic signatures from campers who stayed here in the 1930s, offering a tangible connection to nearly a century of lakeside summers. This authentic structure provides a glimpse into what summer camp life was like in the early 20th century, when families first began making Crystal Acres their vacation destination.</p>

                <p>The Bunkhouse has always been a favorite among children and teenagers, providing generations of young visitors with a sense of independence and adventure. Unlike the main cottages, it maintains its original 1936 simplicity‚Äîno modern amenities, just the pure camp experience that has delighted kids for decades. Today, it continues this tradition as an add-on accommodation, perfect for larger family gatherings who want to share in this authentic piece of history.</p>

                <h3>A Legacy of Family Memories</h3>
                <p>For over 125 years, Crystal Acres has been a place where families reconnect with nature, with each other, and with simpler times. From the early days when our family first fell in love with Crystal Lake, through the 1940s when we began welcoming guests, to today's families who return year after year, the property has remained a constant‚Äîa peaceful retreat where the beauty of New Hampshire's lakes and mountains provides the perfect backdrop for creating lasting memories. We are honored to continue this legacy and share our family's treasure with yours.</p>
            </div>

            <div class="history-gallery">
                <!-- Advanced Google Slide Embed -->
                <div id="historySlideContainer" style="position: relative; width: 100%; max-width: 900px; margin: 0 auto; aspect-ratio: 16/9; overflow: hidden; border-radius: 10px; background: #000; box-shadow: 0 5px 30px rgba(0,0,0,0.3);">
                    <iframe id="historySlideFrame" src="https://docs.google.com/presentation/d/e/2PACX-1vTSPOz11DBFakJ3MvyhtCi9vOJIuEzMcE4-hmigK5I3eK04nE_VorY-CVwqtTXQfl6kw32H5gQsRUvv/pubembed?slide=0&rm=minimal" style="width: 100%; height: 100%; border: none; pointer-events: none; display: block;"></iframe>
                    <button style="position: absolute; top: 50%; left: 20px; transform: translateY(-50%); background: #ffffff; color: #000000; opacity: 0.8; font-size: 24px; padding: 14.4px 19.2px; cursor: pointer; border-radius: 8px; user-select: none; border: none; font-weight: bold; transition: all 0.2s;" onclick="prevHistorySlide()" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.8'">‚óÄ</button>
                    <button style="position: absolute; top: 50%; right: 20px; transform: translateY(-50%); background: #ffffff; color: #000000; opacity: 0.8; font-size: 24px; padding: 14.4px 19.2px; cursor: pointer; border-radius: 8px; user-select: none; border: none; font-weight: bold; transition: all 0.2s;" onclick="nextHistorySlide()" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.8'">‚ñ∂</button>
                </div>

                <script>
                let currentHistorySlide = 0;
                let historyBaseSrc = "https://docs.google.com/presentation/d/e/2PACX-1vTSPOz11DBFakJ3MvyhtCi9vOJIuEzMcE4-hmigK5I3eK04nE_VorY-CVwqtTXQfl6kw32H5gQsRUvv/pubembed";

                function updateHistoryFrame() {
                    let src = historyBaseSrc + "?slide=" + currentHistorySlide + "&rm=minimal";
                    document.getElementById("historySlideFrame").src = src;
                }

                function nextHistorySlide() {
                    currentHistorySlide++;
                    updateHistoryFrame();
                }

                function prevHistorySlide() {
                    if (currentHistorySlide > 0) {
                        currentHistorySlide--;
                        updateHistoryFrame();
                    }
                }
                </script>
            </div>
        </div>
    </section>

    <!-- Cottages Section -->
    <section id="cottages" class="cottages-section">
        <div class="container">
            <h2>The Cottages</h2>
            <p class="cottages-intro">Each of our unique cottages offers its own charm and character, providing the perfect home away from home for your lakeside retreat.</p>

            <div class="cottages-grid">
                <!-- The Villa -->
                <div class="cottage-compact-card">
                    <div class="cottage-compact-image">
                        <img src="villa/main.jpg" alt="The Villa - Living Room">
                    </div>
                    <div class="cottage-compact-content">
                        <h3>The Villa</h3>
                        <p class="cottage-capacity">Sleeps 6 | 2 Bedrooms | 1 Bathroom</p>
                        <p class="cottage-summary">This cozy cottage has the best view of the lake and lots of convenient amenities. Features screened porch, fireplace, fully equipped kitchen, washer/dryer, and Internet TV.</p>
                        <div class="cottage-buttons">
                            <a href="villa/index.html" class="btn btn-details">View Details</a>
                            <a href="reservations.html" class="btn btn-book">Book Now</a>
                        </div>
                    </div>
                </div>

                <!-- The Brown Camp -->
                <div class="cottage-compact-card">
                    <div class="cottage-compact-image">
                        <img src="browncamp/main.jpg" alt="The Brown Camp - Living Room">
                    </div>
                    <div class="cottage-compact-content">
                        <h3>The Brown Camp</h3>
                        <p class="cottage-capacity">Sleeps 7 | 3 Bedrooms | 1 Bathroom</p>
                        <p class="cottage-summary">A spacious cottage with 3 bedrooms, living room, and porch for eating and lounging. Named after Brown University‚Äîyes, even though all our cottages are brown!</p>
                        <div class="cottage-buttons">
                            <a href="browncamp/index.html" class="btn btn-details">View Details</a>
                            <a href="reservations.html" class="btn btn-book">Book Now</a>
                        </div>
                    </div>
                </div>

                <!-- The Shanty -->
                <div class="cottage-compact-card">
                    <div class="cottage-compact-image">
                        <img src="shanty/main.jpg" alt="The Shanty - Living Room">
                    </div>
                    <div class="cottage-compact-content">
                        <h3>The Shanty</h3>
                        <p class="cottage-capacity">Sleeps 6 | 2 Bedrooms | 1 Bathroom</p>
                        <p class="cottage-summary">Set back from the others, the Shanty is a cute, rustic getaway and a family favorite with an inviting porch for eating or relaxing. Features screened porches and fireplace.</p>
                        <div class="cottage-buttons">
                            <a href="shanty/index.html" class="btn btn-details">View Details</a>
                            <a href="reservations.html" class="btn btn-book">Book Now</a>
                        </div>
                    </div>
                </div>

                <!-- The Bunkhouse -->
                <div class="cottage-compact-card">
                    <div class="cottage-compact-image">
                        <img src="bunkhouse/main.jpg" alt="The Bunkhouse - Interior">
                    </div>
                    <div class="cottage-compact-content">
                        <h3>The Bunkhouse</h3>
                        <p class="cottage-capacity">Sleeps 4 | Add-On Only</p>
                        <p class="cottage-summary">Built in 1936 with historic signatures from the 1930s still on the walls. Perfect for kids and teens. Can only be rented as an add-on to main cottages.</p>
                        <div class="cottage-buttons">
                            <a href="bunkhouse/index.html" class="btn btn-details">View Details</a>
                            <a href="reservations.html" class="btn btn-book">Inquire</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact-section">
        <div class="container">
            <h2>Contact Information</h2>
            
            <div class="contact-grid">
                <div class="contact-card">
                    <h3>For Reservations or More Information</h3>
                    <p><strong>Darcy Cloutman</strong></p>
                    <p><a href="mailto:crystalacresnh@gmail.com">crystalacresnh@gmail.com</a></p>
                </div>

                <div class="contact-card">
                    <h3>To Make a Payment</h3>
                    <p><strong>Art Cloutman</strong><br>
                    Crystal Acres LLC<br>
                    278 Crystal Lake Road<br>
                    Gilmanton Iron Works, NH 03837<br>
                    <a href="tel:603-364-7713">603-364-7713</a></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Crystal Acres. All rights reserved.</p>
            <p>278 Crystal Lake Rd, Gilmanton Iron Works, NH 03837</p>
            <p style="margin-top: 10px; font-size: 0.9em; opacity: 0.8;">Created by Riley Joseph Santor</p>
        </div>
    </footer>

    <script src="main.js"></script>
    <script>
        // Main page inline editing
        let isEditing = false;
        let originalContent = null;

        // Check admin status and show edit button
        function updateEditButton() {
            const editBtn = document.getElementById('editPageBtn');
            if (isAdminEnabled()) {
                if (editBtn) editBtn.style.display = 'block';
            } else {
                if (editBtn) editBtn.style.display = 'none';
            }
        }

        // This function is no longer needed - Admin Manager is called directly

        // Toggle edit mode - Use Advanced Editor
        function toggleEditMode() {
            if (!isAdminEnabled()) {
                alert('‚ö†Ô∏è Admin mode is disabled. Please enable admin mode using the Admin toggle button.');
                return;
            }

            initAdvancedEditor();
        }

        function captureCurrentContent() {
            return {
                heroTitle: document.querySelector('.hero-overlay h1').textContent,
                heroSubtitle: document.querySelector('.hero-overlay p').textContent,
                openingParagraphs: Array.from(document.querySelectorAll('.opening-content p')).map(p => p.innerHTML),
                locationText: document.querySelector('#general-info .info-content p:nth-of-type(1)').innerHTML,
                fishingText: document.querySelector('#general-info .info-content p:nth-of-type(2)').innerHTML,
                boatingText: document.querySelector('#general-info .info-content p:nth-of-type(3)').innerHTML,
                thingsIntro: document.querySelector('#things-to-do .info-content > p:first-of-type').innerHTML,
                hikingText: document.querySelector('#things-to-do .info-content h3:nth-of-type(1) + p').innerHTML,
                shoppingText: document.querySelector('#things-to-do .info-content h3:nth-of-type(2) + p').innerHTML,
                whiteMountainsText: document.querySelector('#things-to-do .info-content h3:nth-of-type(3) + p').innerHTML,
                cottagesIntro: document.querySelector('.cottages-intro').textContent,
                contactName1: document.querySelector('.contact-card:nth-of-type(1) p:nth-of-type(1)').innerHTML,
                contactEmail: document.querySelector('.contact-card:nth-of-type(1) p:nth-of-type(2) a').textContent,
                contactName2: document.querySelector('.contact-card:nth-of-type(2) p').innerHTML
            };
        }

        function makeContentEditable() {
            // Hero section
            const heroTitle = document.querySelector('.hero-overlay h1');
            const heroSubtitle = document.querySelector('.hero-overlay p');
            heroTitle.contentEditable = true;
            heroSubtitle.contentEditable = true;
            heroTitle.style.border = '2px dashed #007bff';
            heroSubtitle.style.border = '2px dashed #007bff';
            heroTitle.style.padding = '5px';
            heroSubtitle.style.padding = '5px';

            // Opening paragraphs
            document.querySelectorAll('.opening-content p').forEach(p => {
                p.contentEditable = true;
                p.style.border = '2px dashed #28a745';
                p.style.padding = '10px';
                p.style.backgroundColor = 'rgba(40, 167, 69, 0.05)';
            });

            // General info paragraphs
            document.querySelectorAll('#general-info .info-content p').forEach(p => {
                p.contentEditable = true;
                p.style.border = '2px dashed #17a2b8';
                p.style.padding = '10px';
                p.style.backgroundColor = 'rgba(23, 162, 184, 0.05)';
            });

            // Things to do paragraphs
            document.querySelectorAll('#things-to-do .info-content p').forEach(p => {
                p.contentEditable = true;
                p.style.border = '2px dashed #6f42c1';
                p.style.padding = '10px';
                p.style.backgroundColor = 'rgba(111, 66, 193, 0.05)';
            });

            // Cottages intro
            const cottagesIntro = document.querySelector('.cottages-intro');
            cottagesIntro.contentEditable = true;
            cottagesIntro.style.border = '2px dashed #dc3545';
            cottagesIntro.style.padding = '10px';
            cottagesIntro.style.backgroundColor = 'rgba(220, 53, 69, 0.05)';

            // Contact info
            document.querySelectorAll('.contact-card p').forEach(p => {
                p.contentEditable = true;
                p.style.border = '2px dashed #fd7e14';
                p.style.padding = '10px';
                p.style.backgroundColor = 'rgba(253, 126, 20, 0.05)';
            });
        }

        function removeEditableStyles() {
            // Hero section
            const heroTitle = document.querySelector('.hero-overlay h1');
            const heroSubtitle = document.querySelector('.hero-overlay p');
            heroTitle.contentEditable = false;
            heroSubtitle.contentEditable = false;
            heroTitle.style.border = '';
            heroSubtitle.style.border = '';
            heroTitle.style.padding = '';
            heroSubtitle.style.padding = '';

            // All paragraphs
            document.querySelectorAll('.opening-content p, #general-info .info-content p, #things-to-do .info-content p, .cottages-intro, .contact-card p').forEach(p => {
                p.contentEditable = false;
                p.style.border = '';
                p.style.padding = '';
                p.style.backgroundColor = '';
            });
        }

        function savePageContent() {
            saveAdvancedEdits();
        }

        function cancelPageEdit() {
            cancelAdvancedEdits();
        }

        // Load saved content on page load
        window.addEventListener('DOMContentLoaded', function() {
            updateEditButton();
            
            const savedData = localStorage.getItem('mainPageContent');
            if (savedData) {
                const data = JSON.parse(savedData);
                
                // Apply saved content
                document.querySelector('.hero-overlay h1').textContent = data.heroTitle;
                document.querySelector('.hero-overlay p').textContent = data.heroSubtitle;
                
                const openingPs = document.querySelectorAll('.opening-content p');
                data.openingParagraphs.forEach((html, i) => {
                    if (openingPs[i]) openingPs[i].innerHTML = html;
                });

                if (data.locationText) {
                    document.querySelector('#general-info .info-content p:nth-of-type(1)').innerHTML = data.locationText;
                }
                if (data.fishingText) {
                    document.querySelector('#general-info .info-content p:nth-of-type(2)').innerHTML = data.fishingText;
                }
                if (data.boatingText) {
                    document.querySelector('#general-info .info-content p:nth-of-type(3)').innerHTML = data.boatingText;
                }

                if (data.thingsIntro) {
                    document.querySelector('#things-to-do .info-content > p:first-of-type').innerHTML = data.thingsIntro;
                }
                if (data.hikingText) {
                    document.querySelector('#things-to-do .info-content h3:nth-of-type(1) + p').innerHTML = data.hikingText;
                }
                if (data.shoppingText) {
                    document.querySelector('#things-to-do .info-content h3:nth-of-type(2) + p').innerHTML = data.shoppingText;
                }
                if (data.whiteMountainsText) {
                    document.querySelector('#things-to-do .info-content h3:nth-of-type(3) + p').innerHTML = data.whiteMountainsText;
                }

                if (data.cottagesIntro) {
                    document.querySelector('.cottages-intro').textContent = data.cottagesIntro;
                }

                if (data.contactName1) {
                    document.querySelector('.contact-card:nth-of-type(1) p:nth-of-type(1)').innerHTML = data.contactName1;
                }
                if (data.contactEmail) {
                    const emailLink = document.querySelector('.contact-card:nth-of-type(1) p:nth-of-type(2) a');
                    emailLink.textContent = data.contactEmail;
                    emailLink.href = 'mailto:' + data.contactEmail;
                }
                if (data.contactName2) {
                    document.querySelector('.contact-card:nth-of-type(2) p').innerHTML = data.contactName2;
                }
            }
        });

        // Listen for admin mode changes from storage (other tabs)
        window.addEventListener('storage', function(e) {
            if (e.key === 'adminEnabledPages' || e.key === 'adminModeChangedTrigger') {
                updateEditButton();
            }
        });
        
        // Listen for admin mode changes in same tab
        window.addEventListener('adminModeChanged', function() {
            updateEditButton();
        });
        
        // Toggle admin dropdown menu
        function toggleAdminDropdown() {
            const dropdown = document.getElementById('adminDropdown');
            dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            const dropdown = document.getElementById('adminDropdown');
            const btn = document.getElementById('adminToolsBtn');
            if (dropdown && btn && !dropdown.contains(e.target) && !btn.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });
        
        // Toggle maintenance mode
        function toggleMaintenanceMode() {
            const isMaintenanceMode = localStorage.getItem('maintenanceMode') === 'true';
            
            if (!isMaintenanceMode) {
                // Enable maintenance mode
                if (confirm('‚ö†Ô∏è Enable Maintenance Mode?\n\nThis will show a maintenance message to all non-admin visitors. You will still be able to access the site normally.')) {
                    localStorage.setItem('maintenanceMode', 'true');
                    updateMaintenanceStatus();
                    alert('‚úÖ Maintenance mode enabled. Only admins can view the site normally.');
                }
            } else {
                // Disable maintenance mode
                if (confirm('Enable site access for all visitors?')) {
                    localStorage.setItem('maintenanceMode', 'false');
                    updateMaintenanceStatus();
                    alert('‚úÖ Maintenance mode disabled. Site is now accessible to everyone.');
                }
            }
        }
        
        // Update maintenance mode status display
        function updateMaintenanceStatus() {
            const isMaintenanceMode = localStorage.getItem('maintenanceMode') === 'true';
            const statusSpan = document.getElementById('maintenanceStatus');
            const maintenanceModeBtn = document.getElementById('maintenanceModeBtn');
            
            if (statusSpan) {
                statusSpan.textContent = isMaintenanceMode ? 'ON' : 'OFF';
                statusSpan.style.color = isMaintenanceMode ? '#dc3545' : '#28a745';
                statusSpan.style.fontWeight = 'bold';
            }
            
            if (maintenanceModeBtn) {
                maintenanceModeBtn.style.backgroundColor = isMaintenanceMode ? '#fff3cd' : 'white';
            }
        }
        
        // Check maintenance mode on page load
        function checkMaintenanceMode() {
            const isMaintenanceMode = localStorage.getItem('maintenanceMode') === 'true';
            const isAdmin = isAdminEnabled();
            
            // Update status display
            updateMaintenanceStatus();
            
            // If maintenance mode is on and user is not admin, show maintenance overlay
            if (isMaintenanceMode && !isAdmin) {
                const overlay = document.getElementById('maintenanceOverlay');
                if (overlay) {
                    overlay.style.display = 'block';
                }
            }
        }
        
        // Listen for maintenance mode changes from other tabs
        window.addEventListener('storage', function(e) {
            if (e.key === 'maintenanceMode') {
                checkMaintenanceMode();
            }
        });
        
        // Update admin buttons visibility
        window.addEventListener('adminModeChanged', function() {
            updateEditButton();
            checkMaintenanceMode(); // Also check maintenance mode when admin status changes
        });
        
        // Initialize photo persistence system on page load
        if (typeof initPhotoStorage === 'function') {
            initPhotoStorage();
        }
        
        // Check maintenance mode on page load
        checkMaintenanceMode();

        // Google Slides navigation function
        function navigateSlide(direction) {
            var iframe = document.getElementById('slidesFrame');
            var iframeSrc = iframe.src;
            
            // Parse current slide number
            var slideMatch = iframeSrc.match(/slide=id\.([^&]+)/);
            
            if (direction === 'next') {
                // Navigate to next slide
                iframe.contentWindow.postMessage({type: 'next'}, '*');
                // Fallback: modify URL to increment slide
                if (iframeSrc.indexOf('start=false') === -1) {
                    iframeSrc = iframeSrc.replace('start=true', 'start=false');
                }
            } else if (direction === 'previous') {
                // Navigate to previous slide
                iframe.contentWindow.postMessage({type: 'previous'}, '*');
            }
            
            // Note: Due to cross-origin restrictions, manual navigation via URL manipulation
            // may be required. The buttons will attempt to send messages to the iframe.
        }
    </script>
    </div> <!-- End mainWebsite -->

    <!-- Device Selection Script -->
    <script>
        function selectDevice(deviceType) {
            // Store device preference
            localStorage.setItem('selectedDevice', deviceType);
            
            // Apply device-specific styles
            const root = document.documentElement;
            const mainWebsite = document.getElementById('mainWebsite');
            const body = document.body;
            
            // Remove any existing device classes
            body.classList.remove('desktop-mode', 'laptop-mode', 'tablet-mode', 'phone-mode');
            
            switch(deviceType) {
                case 'desktop':
                    root.style.fontSize = '16px';
                    body.classList.add('desktop-mode');
                    break;
                case 'laptop':
                    root.style.fontSize = '15px';
                    body.classList.add('laptop-mode');
                    break;
                case 'tablet':
                    root.style.fontSize = '14px';
                    body.classList.add('tablet-mode');
                    break;
                case 'phone':
                    root.style.fontSize = '13px';
                    body.classList.add('phone-mode');
                    // Add viewport meta for better mobile scaling
                    let viewport = document.querySelector('meta[name="viewport"]');
                    if (viewport) {
                        viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes');
                    }
                    break;
            }
            
            // Hide device selection screen and show main website
            const selectionScreen = document.getElementById('deviceSelectionScreen');
            selectionScreen.style.animation = 'fadeOut 0.5s ease';
            
            setTimeout(() => {
                selectionScreen.style.display = 'none';
                mainWebsite.style.display = 'block';
                mainWebsite.style.animation = 'fadeIn 0.5s ease';
            }, 500);
        }
        
        // Check if device was already selected
        window.addEventListener('DOMContentLoaded', function() {
            const selectedDevice = localStorage.getItem('selectedDevice');
            if (selectedDevice) {
                // Auto-select if previously chosen
                selectDevice(selectedDevice);
            }
        });
        
        // Add fade animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
